{% extends 'core/base.html' %}

{% block title %}
  {% if form.errors %}
    Error - Feedback
  {% else %}
    Feedback
  {% endif %}
{% endblock %}

{% block feedback_banner %}{% endblock %}

{% block content %}
<form action="./#form"
      method="post">
  <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
    <h2 class="govuk-fieldset__heading">Send feedback</h2>
  </legend>
  {% if form.errors %}
  <div id="form"
       class="govuk-error-summary"
       aria-labelledby="error-summary-title"
       role="alert"
       tabindex="-1"
       data-module="error-summary">
    <h3 class="govuk-error-summary__title"
        id="error-summary-title">Please fix the following errors</h3>
    <div class="govuk-error-summary__body">
      <ul class="govuk-list govuk-error-summary__list">
        {% for field in form %}
          {% if field.errors %}
            {% for error in field.errors %}
              <li><a href="#{{ field.name }}"
                  class="error">{{ error|escape }}</a></li>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <fieldset class="govuk-fieldset">
    <div class="govuk-form-group govuk-!-width-two-thirds govuk-!-margin-bottom-0">
      <label id="for-message"
             class="govuk-label govuk-visually-hidden"
             for="message">Message</label>
      <div class="govuk-warning-text govuk-!-margin-bottom-0">
        <span class="govuk-warning-text__icon"
              aria-hidden="true">!</span>
        <strong class="govuk-warning-text__text"
                id="message-hint">
          Do not include personal or financial information, like your National Insurance number or credit card details.
        </strong>
      </div>
    </div>
    <div
         class="govuk-form-group {% if form.message.errors %} govuk-form-group--error{% endif %}">
      {% if form.message.errors %}
        {% for error in form.message.errors %}
          <span id="message-error"
                class="govuk-error-message">
            {{ error | escape }}
          </span>
        {% endfor %}
      {% endif %}

      <textarea class="govuk-textarea govuk-!-margin-bottom-0 govuk-!-width-two-thirds"
                id="message"
                name="message"
                rows="7"
                aria-describedby="message-hint">{% if form.data.message %}{{ form.data.message }}{% endif %}</textarea>
      <p class="govuk-hint govuk-character-count__message govuk-!-margin-top-2 govuk-!-margin-bottom-8">You can enter up
        to 1,000 characters.</p>
    </div>
    {% csrf_token %}
  </fieldset>
  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
      <h2 class="govuk-fieldset__heading">Do you want a reply?</h2>
    </legend>
    <p class="govuk-body">If you'd like us to be able get back to you, please leave your details below.</p>
    <div class="govuk-form-group{% if form.name.errors %} govuk-form-group--error{% endif %}">
      <label class="govuk-label"
             for="name">Name</label>
      {% if form.name.errors %}
        {% for error in form.name.errors %}
          <span id="name-error"
                class="govuk-error-message">
            <span class="govuk-visually-hidden">Error:</span> {{ error | escape }}
          </span>
        {% endfor %}
      {% endif %}
      <input class="govuk-input govuk-!-width-one-half{% if form.name.errors %} govuk-input--error{% endif %}"
             {% if form.name.errors %}
             aria-describedby="name-error"
             {% endif %}
             autocomplete="name"
             id="name"
             name="name"
             type="text"
             spellcheck="false"
             {% if form.data.name %}
             value="{{ form.data.name }}"
             {% endif %} />
    </div>
    <div class="govuk-form-group{% if form.email.errors %} govuk-form-group--error{% endif %}">
      <label class="govuk-label"
             for="email">Email address</label>
      {% if form.email.errors %}
        {% for error in form.email.errors %}
          <span id="email-error"
                class="govuk-error-message">
            <span class="govuk-visually-hidden">Error:</span> {{ error | escape }}
          </span>
        {% endfor %}
      {% endif %}
      <input class="govuk-input govuk-!-width-one-half{% if form.email.errors %} govuk-input--error{% endif %}"
             {% if form.email.errors %}
             aria-describedby="email-error"
             {% endif %}
             autocomplete="email"
             id="email"
             name="email"
             type="email"
             spellcheck="false"
             {% if form.data.email %}
             value="{{ form.data.email }}"
             {% endif %} />
    </div>
  </fieldset>
  <button type="submit"
          class="govuk-button govuk-!-padding-left-8 govuk-!-padding-right-8">Send feedback</button>
</form>
{% endblock %}
